# 调试配置指南

本项目已配置完整的 VS Code 调试环境，支持多种调试场景。

## 调试配置说明

### 1. Debug NestJS Application
- **用途**: 直接调试 TypeScript 源码
- **启动方式**: 按 F5 或在调试面板选择此配置
- **特点**: 使用 ts-node 直接运行 TypeScript 文件，支持断点调试

### 2. Debug NestJS with Watch Mode
- **用途**: 调试模式下的热重载开发
- **启动方式**: 在调试面板选择此配置
- **特点**: 文件变更时自动重启，保持调试连接

### 3. Debug Built Application
- **用途**: 调试编译后的 JavaScript 代码
- **启动方式**: 在调试面板选择此配置
- **特点**: 会先执行构建任务，然后调试 dist 目录中的代码

### 4. Debug Tests
- **用途**: 调试单元测试
- **启动方式**: 在调试面板选择此配置
- **特点**: 支持在测试代码中设置断点

### 5. Attach to Process
- **用途**: 附加到已运行的 Node.js 进程
- **启动方式**: 先启动应用（npm run start:debug），再选择此配置
- **特点**: 适用于调试已启动的服务

## 使用步骤

### 基本调试流程
1. 在代码中设置断点（点击行号左侧或按 F9）
2. 按 F5 启动调试，或在调试面板选择配置
3. 程序会在断点处暂停，可以查看变量、调用栈等信息
4. 使用调试控制按钮继续执行、单步调试等

### 环境变量配置
- 确保项目根目录有 `.env` 文件
- 调试配置会自动加载环境变量
- 开发环境下 `NODE_ENV` 会被设置为 `development`

### 路径映射支持
- 项目配置了路径别名（@/、@/common/ 等）
- 调试时会正确解析这些路径映射
- 断点可以正常设置在使用路径别名的文件中

## 常见问题

### 断点不生效
1. 确保 TypeScript 配置中 `sourceMap: true`
2. 检查 `outFiles` 配置是否正确
3. 确认文件路径映射配置

### 无法启动调试
1. 检查 Node.js 版本是否兼容
2. 确认依赖包已正确安装（npm install）
3. 检查端口是否被占用

### 环境变量未加载
1. 确认 `.env` 文件存在且格式正确
2. 检查调试配置中的 `envFile` 路径

## 推荐扩展

项目已配置推荐扩展列表，首次打开项目时 VS Code 会提示安装：
- TypeScript 支持
- ESLint 代码检查
- Prettier 代码格式化
- Prisma 数据库工具
- Jest 测试支持

## 性能优化

### 调试性能建议
- 使用 `skipFiles` 跳过 node_modules 调试
- 合理设置断点，避免过多断点影响性能
- 大型项目建议使用 "Attach to Process" 模式

### 内存使用
- 调试模式会占用更多内存
- 长时间调试建议定期重启
- 可以通过 VS Code 设置调整调试器内存限制